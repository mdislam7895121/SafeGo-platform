SAFEGO — SAFE PILOT ADMIN SUPPORT CENTER (ROLE-SEPARATED, NON-BREAKING, ADDITIVE ONLY)
====================================================================================

GOAL
Create an Admin-only “Support Center (SafePilot)” inside the Admin Dashboard that lets Admin view and manage support across:
1) Customers
2) Drivers
3) Restaurants
While keeping all end-user chat experiences (Customer/Driver/Restaurant) separate and unchanged.

ABSOLUTE RULES (MUST FOLLOW)
1) Additive only. Do not rename/remove existing files, routes, schemas, or fields.
2) Do not break existing SafePilot widgets for any role.
3) Admin can view cross-role support. Non-admin users can ONLY view their own conversations.
4) RBAC must be enforced on every endpoint:
   - Customer cannot see any driver documents or KYC.
   - Driver cannot see customer NID/government ID.
   - Restaurant cannot see other restaurants.
   - Only Admin can view other users’ conversations, pricing, commissions, verification, blocking.
5) Country-aware support must exist for BD vs US.
6) Must support all 3 services: ride-hailing, food delivery, parcel delivery.
7) Must keep status flows consistent:
   - Ride: requested → searching_driver → accepted → driver_arriving → in_progress → completed/cancelled_x
   - Food: placed → accepted → preparing → ready_for_pickup → picked_up → on_the_way → delivered/cancelled_x
   - Parcel: requested → searching_driver → accepted → picked_up → on_the_way → delivered/cancelled_x
8) Must preserve commission rules:
   - Cash ride: driver keeps cash, SafeGo commission becomes negative driver_wallet_balance, weekly settle.
   - Cash food: restaurant keeps cash, commission becomes negative restaurant_wallet, weekly settle.
   - Online: SafeGo keeps commission automatically.
   - Admin can settle balances and mark paid.
9) SafePilot must never leak sensitive documents in chat:
   - No NID images, license images, government id full numbers, SSN. Mask or deny.

SECURITY PHASE DECLARATION (MANDATORY)
Apply SafeGo Security Roadmap Phase: “Access Control + Audit Logging + Data Minimization” in this prompt.

AFFECTED MODULES CHECK (MUST LIST AND PRESERVE)
Before changing anything, identify impacted modules and confirm non-breaking:
- Admin dashboard cards/navigation
- Driver management (BD + US + NY)
- Customer management
- Restaurant management
- Parcel management
- Wallet & commission settlement
- KYC flows and document review
- Existing SafePilot chat widget and endpoints

DELIVERABLES
A) Admin Support Center UI (Admin-only)
B) Admin Support APIs (Admin-only)
C) Conversation viewer + filters + escalation workflow
D) Audit log integration
E) Demo seed data + configurable settings

------------------------------------------------------------------------------------
A) ADMIN SUPPORT CENTER UI (ADMIN ONLY)
------------------------------------------------------------------------------------

1) Add a new Admin sidebar nav item:
   - Label: “Support Center”
   - Route: /admin/support-center

2) Page layout:
   - Header: Support Center (SafePilot)
   - Tabs (role-separated):
     (i) Customers
     (ii) Drivers
     (iii) Restaurants
     (iv) Escalations
     (v) Audit

3) Each role tab must show:
   - Filters:
     - country: US/BD/ALL
     - service: ride/food/parcel/ALL
     - status: open/escalated/resolved/ALL
     - date range
     - search (user name/email/phone/conversation id)
   - List panel (left):
     - conversation previews (last message snippet, role badge, country badge, service badge, last updated)
   - Detail panel (right):
     - full message thread (bubble UI)
     - entity links (ride_id / food_order_id / delivery_id if present)
     - “Tools trace” section (collapsible) showing which tools were run (no secrets)
     - “Actions” section:
       - Create ticket (manual)
       - Mark resolved
       - Assign to agent (admin user selection)
       - Add internal note (admin-only)
       - Request follow-up (schedule)

4) Escalations tab:
   - Table of escalated tickets with SLA timers:
     - ticket_code, role, user_id, country, service, reason, severity, assigned_to, status, created_at
   - Actions:
     - Assign / Reassign
     - Mark resolved with resolution_reason
     - Export CSV

5) Audit tab:
   - Filterable log list:
     - actor_role=ADMIN, action_type, target_role, target_id, timestamp
   - Show:
     - message_id, conversation_id, moderation flags, denial reasons (RBAC/tool-deny), safe_response_mode enabled, etc.

6) UI components:
   - Use existing UI library in repo (shadcn/ui if present).
   - Must be responsive and fast: list virtualization for conversation list.

------------------------------------------------------------------------------------
B) ADMIN SUPPORT APIS (ADMIN ONLY)
------------------------------------------------------------------------------------

Create new admin-only endpoints (d...